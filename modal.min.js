const modalLink=document.querySelector(".open-modal"),modalPopup=document.querySelector(".modal"),modalClose=modalPopup.querySelector(".wrapper-close"),modalForm=modalPopup.querySelector(".modal-form"),modalName=modalPopup.querySelector(".modal-form-name"),modalEmail=modalPopup.querySelector(".modal-form-email"),modalTextmail=modalPopup.querySelector(".modal-form-textmail");let isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("login")}catch(e){isStorageSupport=!1}modalLink.addEventListener("click",function(e){e.preventDefault(),modalPopup.classList.add("visible"),storageName&storageEmail?(modalName.value=storageName,modalEmail.value=storageEmail,modalTextmail.focus()):(storageName?modalEmail:modalName).focus()}),modalClose.addEventListener("click",function(e){e.preventDefault(),modalPopup.classList.remove("visible"),modalPopup.classList.remove("modal-error")}),modalForm.addEventListener("submit",function(e){modalName.value&&modalEmail.value?isStorageSupport&&(localStorage.setItem("login",modalName.value),localStorage.setItem("email",modalEmail.value)):(e.preventDefault(),modalPopup.classList.remove("modal-error"),modalPopup.offsetWidth=modalPopup.offsetWidth,modalPopup.classList.add("modal-error"))}),window.addEventListener("keydown",function(e){27===e.keyCode&&modalPopup.classList.contains("visible")&&(e.preventDefault(),modalPopup.classList.remove("visible"),modalPopup.classList.remove("modal-error"))});const modalMapOpen=document.querySelector(".map"),modalMap=document.querySelector(".modal-map"),modalMapClose=modalMap.querySelector(".wrapper-close");modalMapOpen.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.add("visible")}),modalMapClose.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.remove("visible")});